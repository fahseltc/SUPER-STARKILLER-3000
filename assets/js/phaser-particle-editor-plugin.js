/*! f3cd0e3 */
var ParticleEditorPlugin=function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){t.exports=Phaser},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var y=r(0),d=r.n(y),g=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),v=function t(e,r,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},b=function(t){function e(t,r,i,a,l,c){o(this,e);var u=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i,a,l));return u.particleArgumentsColor=c.color||null,u}return i(e,t),g(e,[{key:"onEmit",value:function(){if(this.particleArgumentsColor){var t=d.a.Color.createColor(this.particleArgumentsColor.start.r,this.particleArgumentsColor.start.g,this.particleArgumentsColor.start.b),r=this.game.add.tween(t).to(this.particleArgumentsColor.end,this.particleArgumentsColor.rate,d.a.Easing[this.particleArgumentsColor.ease][this.particleArgumentsColor.easeMode],!0,this.particleArgumentsColor.delay);r.onUpdateCallback(this.updateColor.bind(this)),r.onComplete.add(this.onTweenComplete,this)}v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onEmit",this).call(this)}},{key:"updateColor",value:function(t){d.a.Color.updateColor(t.target),this.tint=d.a.Color.getColor32(this.alpha,t.target.r,t.target.g,t.target.b)}},{key:"onTweenComplete",value:function(t){this.game.tweens.remove(t)}}]),e}(d.a.Particle),_=b,O=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),w=function t(e,r,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},P=function(t){function e(t,r,o){a(this,e);var n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o.emitX,o.emitY,o.maxParticles));return n.name=r,n.particleClass=_,n.applyProperties(o),n}return c(e,t),O(e,[{key:"applyProperties",value:function(t){this.properties=t,this.gravity.x=t.gravityX,this.gravity.y=t.gravityY,this.setRotation(t.rotationMin,t.rotationMax),this.emitX=t.emitX,this.emitY=t.emitY,this.maxParticles=t.maxParticles,this.blendMode=t.blendMode,this.setAlpha(t.alphaMin,t.alphaMax,t.alphaRate,d.a.Easing[t.alphaEase][t.alphaEaseMode],t.alphaYoyo),t.randomScale?(this.minParticleScale=t.minScale,this.maxParticleScale=t.maxScale):this.setScale(t.scaleFromX,t.scaleToX,t.scaleFromY,t.scaleToY,t.scaleRate,d.a.Easing[t.scaleEase][t.scaleEaseMode],t.scaleYoyo),this.minParticleSpeed.setTo(t.minSpeedX,t.minSpeedY),this.maxParticleSpeed.setTo(t.maxSpeedX,t.maxSpeedY),this.lifespan=t.lifespan,this.angularDrag=t.angularDrag,this.bounce.setTo(t.bounceX,t.bounceY),this.width=t.width,this.height=t.height,t.explode||(this.on=t.enabled),this.particleArgumentsColor=this.properties.particleArguments.color||null,this.particleArgumentsStartRotation=this.properties.particleArguments.startRotation||null,this.particleArgumentsAnchor=this.properties.particleArguments.anchor||null,this.particleArgumentsLifespan=this.properties.particleArguments.lifespan}},{key:"resetParticle",value:function(t,r,o){w(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resetParticle",this).call(this,t,r,o),this.particleArgumentsColor&&(t.tint=d.a.Color.getColor32(t.alpha,this.particleArgumentsColor.start.r,this.particleArgumentsColor.start.g,this.particleArgumentsColor.start.b)),this.particleArgumentsStartRotation&&(t.angle=this.game.rnd.integerInRange(this.particleArgumentsStartRotation.min,this.particleArgumentsStartRotation.max)),this.particleArgumentsAnchor&&t.anchor.setTo(this.particleArgumentsAnchor.x,this.particleArgumentsAnchor.y),t.lifespan=this.game.rnd.integerInRange(this.particleArgumentsLifespan.min,this.particleArgumentsLifespan.max)}}]),e}(d.a.Particles.Arcade.Emitter),E=P,j={};j.isLoading=!1,j.queue=[];var A=function(t,e,r,o,n){if(arguments.length>5&&void 0!==arguments[5]&&!arguments[5]&&t.cache.checkImageKey(r))return void C(o);var i=new Image;if(j.isLoading)return void j.queue.push({game:t,bitmapData:e,key:r,oncreate:o,onerror:n});j.isLoading=!0,i.onload=function(){t.cache.addImage(r,e,i),C(o)},i.onerror=function(){C(n)},i.src=e},C=function(t){t&&t(),j.isLoading=!1,x()},x=function(){if(j.queue.length>0){var t=j.queue.shift();A(t.game,t.bitmapData,t.key,t.oncreate,t.onerror,!1)}},k=function(){function t(t,e){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){n=!0,i=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),M=function t(e,r,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},Y=function(t){function e(t,r,o,n){u(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.x=o,i.y=n,i._emitersMap=new Map,i._collidebleEmitters=new Set,i._emitX=0,i._emitY=0,i._arcade=i.game.physics.arcade,i._initEmitters(r),i}return p(e,t),S(e,[{key:"_initEmitters",value:function(t){var e=t.emitters;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];this.addEmitter(r,o)}}},{key:"_createEmitter",value:function(t,e){return new E(this.game,t,e)}},{key:"add",value:function(t,r,o){M(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,r,o),this._emitersMap.set(t.name,t)}},{key:"remove",value:function(t,r,o){M(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this,t,r,o),this._emitersMap.delete(t.name)}},{key:"_emit",value:function(t,e){e.enabled&&(e.flow?t.flow(0,e.frequency,e.quantity,e.total,e.immediate):t.start(e.explode,0,e.frequency,e.total))}},{key:"update",value:function(){M(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this);var t=!0,r=!1,o=void 0;try{for(var n,i=this._collidebleEmitters[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var a=n.value;this._arcade.collide(a)}}catch(t){r=!0,o=t}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"emit",value:function(){var t=!0,e=!1,r=void 0;try{for(var o,n=this._emitersMap[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value,a=k(i,2),l=(a[0],a[1]);this._emit(l,l.properties)}}catch(t){e=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw r}}}},{key:"_onEmitterImageUpdate",value:function(t,e){this._recreateEmitter(t,e)}},{key:"_recreateEmitter",value:function(t,e){this.removeEmitter(t),this.addEmitter(t,e)}},{key:"addEmitter",value:function(t,e){var r=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];A(this.game,e[t],t,function(){var n=r._createEmitter(t,e);r.add(n),n.makeParticles(n.name,e.frames,e.maxParticles,e.collide,e.collideWorldBounds,e.particleArguments),r.updateEmitterProperties(t,e),o&&r._emit(n,e),e.collide||e.collideWorldBounds?r._collidebleEmitters.add(n):r._collidebleEmitters.delete(n)},null,!1)}},{key:"removeEmitter",value:function(t){this.remove(this._emitersMap.get(t))}},{key:"updateEmitterImage",value:function(t,e){A(this.game,e[t],t,this._onEmitterImageUpdate.bind(this,t,e))}},{key:"updateEmitterProperties",value:function(t,e){var r=this._emitersMap.get(t);r.applyProperties(e),this._emit(r,e)}},{key:"updateEmitterOption",value:function(t,e){this._recreateEmitter(t,e)}},{key:"emitX",get:function(){return this._emitX},set:function(t){this._emitX=t;var e=!0,r=!1,o=void 0;try{for(var n,i=this._emitersMap[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value,l=k(a,2),c=(l[0],l[1]);c.emitX=c.properties.emitX+this.emitX}}catch(t){r=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"emitY",get:function(){return this._emitY},set:function(t){this._emitY=t;var e=!0,r=!1,o=void 0;try{for(var n,i=this._emitersMap[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value,l=k(a,2),c=(l[0],l[1]);c.emitY=c.properties.emitY+this.emitY}}catch(t){r=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}}}]),e}(d.a.Group),T=Y,X=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),R=function(t){function e(t,r){f(this,e);var o=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return o.addParticleFactory(),o}return m(e,t),X(e,[{key:"addParticleFactory",value:function(){var t=this;d.a.GameObjectFactory.prototype.particleEffect=function(e,r,o,n){var i=new T(t.game,t.getData(o),e,r);return(n||t.game.world).add(i)},d.a.GameObjectCreator.prototype.particleEffect=function(e,r,o){return new T(t.game,t.getData(o),e,r)}}},{key:"getData",value:function(t){return"string"==typeof t?this.game.cache.getJSON(t):t}}]),e}(d.a.Plugin),D=R;r.d(e,"createImageFromBitmapData",function(){return A});e.default=D}]).default;
//# sourceMappingURL=plugin.min.js.map